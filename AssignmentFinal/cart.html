<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/AssignmentFinal/css/cart.css">
    <link rel="icon" type="image/png" href="/IMG/TUANS.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>TUANS | MUA ONLINE QUẦN ÁO VÀ PHỤ KIỆN NAM NỮ THỜI TRANG</title>
</head>
<body>
    <div class="box">
        <div class="headersreach">
            <div class="headermid">
                <div class="headermid-left">
                    <div class=""><a href="index.html"><img src="/IMG/TUANS.png" width="100px"></a></div>
                    <div class="p1">
                        <input type="text" placeholder="Tìm Kiếm">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                </div>
                <p><i class="fa-solid fa-location-dot"></i><a href="#">VỊ TRÍ</a> </p>
                <p><i class="fa-solid fa-phone"></i>GỌI ĐẶT HÀNG : 0123456789 </p>
            </div>
            <div class="headerbottom">
                <nav class="menu">
                    <ul>
                        <li>
                            <a href="#">NAM</a>
                            <ul>
                                <li><a href="#">ÁO NAM</a></li>
                                <li><a href="#">QUẦN NAM</a></li>
                                <li><a href="#">ÁO KHOÁC NAM</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">NỮ</a>
                            <ul>
                                <li><a href="#">ÁO NỮ</a></li>
                                <li><a href="#">QUẦN NỮ</a></li>
                                <li><a href="#">ÁO KHOÁC NỮ</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">BỘ SƯU TẬP</a>
                            <ul>
                                <li><a href="#">MÙA XUÂN 2024</a></li>
                                <li><a href="#">MÙA HÈ 2024</a></li>
                                <li><a href="#">PREMIUM</a></li>
                                <li><a href="#">TUANS X ONE PIECE</a></li>

                            </ul>
                        </li>
                        <li>
                            <a href="#">PHỤ KIỆN</a>
                            <ul>
                                <li><a href="#">NÓN</a></li>
                                <li><a href="#">TÚI VẢI ĐEO CHÉO</a></li>
                                <li><a href="#">BALO</a></li>
                                <li><a href="#">VÍ</a></li>

                            </ul>
                        </li>`
                        <li><a href="gopy.html">GÓP Ý</a></li>
                    </ul>
                </nav>
                <nav class="menu">
                    <ul>
                        <li><a href="cart.html"><i class="fa fa-shopping-bag" aria-hidden="true"></i>
                                GIỎ HÀNG</a></li>
                        <li><a href="login.html"> ĐĂNG NHẬP / ĐĂNG KÍ</a></li>
                    </ul>
                </nav>

            </div>
        </div>
    </div>
    <h1>Giỏ hàng của bạn</h1>
    <div id="cartCount">
        <p>Số lượng trong giỏ hàng: 0</p>
    </div>

    <div id="cartItems">
        <p>Danh sách sản phẩm trong giỏ hàng:</p>
        <ul id="cartItemList"></ul>
    </div>

    <p>Tổng số tiền: <span id="totalPrice">$0</span></p>

    <button onclick="clearCart()">Xóa giỏ hàng</button>
    <a href="pay.html"><button>Thanh toán</button></a>

    <div class="logo">
        <a href="https://zalo.me/0931632195/"><img src="https://page.widget.zalo.me/static/images/2.0/Logo.svg"
                width="100%"></a>
    </div>

    <footer>
        <div class="col3">
            <h2>TUANS.ID.VN</h2>
            <div class="chitiet">
                <p><b>Địa chỉ:</b>139/13 Lê Đức Thọ, Phường 6, Q.Gò Vấp, TP.Hồ Chí Minh.</p>
                <p><b>Phone:</b>0123456789</p>
                <p><b>Open:</b>Open: 8:AM - 22:PM </p>
                <p><b>Email:</b>tuans.id.vn@gmail.com</p>
            </div>
        </div>
        <div class="col3">
            <h2>HỔ TRỢ KHÁCH HÀNG</h2>
            <div class="chitiet">
                <p>Hướng dẫn mua hàng</p>
                <p>Chính sách bảo mật</p>
                <p>Hình thức thanh toán</p>
                <p>Bảo hành và đổi trả</p>
                <p>Chính sách giao hàng</p>
            </div>
        </div>
        <div class="col3">
            <h2>THÔNG TIN</h2>
            <div class="chitiet">
                <p>Tài khoản</p>
                <p>Kiểm tra đơn hàng</p>
                <p>Đăng kí nhận tin</p>
            </div>
        </div>
        <div class="col3">
            <h2>Chi Nhánh</h2>
            <div class="chitiet">
                <p>Quận 7, Phường 3, Đường Số 27</p>
                <p>Quận Bình Thạnh, Phường 13, Đường Số 25</p>
                <p>Quận Gò Vấp, Phường 6, Đường Số 28</p>
                <p>Quận 1, Phường 3, Đường Số 20</p>

            </div>
        </div>
    </footer>

    <script src="sanpham.js">
        let productPrices = {
        };

        function updateCartCount() {
            let cartItems = localStorage.getItem('cartItems');
            let cartCount = 0;
            let totalPrice = 0;
            if (cartItems) {
                cartItems = JSON.parse(cartItems);
                for (let productId in cartItems) {
                    cartCount += cartItems[productId];
                    totalPrice += cartItems[productId] * productPrices[productId];
                }
            }
            document.getElementById('cartCount').innerHTML = "<p>Số lượng trong giỏ hàng: " + cartCount + "</p>";
            document.getElementById('totalPrice').textContent = "$" + totalPrice;

            // Update cart items list
            let cartItemList = document.getElementById('cartItemList');
            cartItemList.innerHTML = '';
            for (let productId in cartItems) {
                let listItem = document.createElement('li');
                listItem.textContent = "Sản phẩm " + productId + ": " + cartItems[productId] + " sản phẩm - Tổng giá: $" + (cartItems[productId] * productPrices[productId]);
                
                // Add delete button for each item
                let deleteButton = document.createElement('button');
                deleteButton.textContent = "Xóa";
                deleteButton.onclick = function() {
                    deleteItem(productId);
                };
                listItem.appendChild(deleteButton);
                
                cartItemList.appendChild(listItem);
            }
        }

        function clearCart() {
            localStorage.removeItem('cartItems');
            updateCartCount();
        }

        function deleteItem(productId) {
            let cartItems = localStorage.getItem('cartItems');
            if (cartItems) {
                cartItems = JSON.parse(cartItems);
                if (cartItems[productId] > 1) {
                    cartItems[productId]--;
                } else {
                    delete cartItems[productId];
                }
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                updateCartCount();
            }
        }

        function checkout() {
            alert("Cảm ơn bạn đã thanh toán! Đơn hàng của bạn đang được xử lý.");
            localStorage.removeItem('cartItems');
            updateCartCount();
        }

        // Update cart count when page loads
        window.onload = function() {
            updateCartCount();
        };

        // Update cart count if any changes occur in the local storage
        window.addEventListener('storage', function(event) {
            if (event.key === 'cartItems') {
                updateCartCount();
            }
        });


   

    function updateCartCount() {
        let cartItems = localStorage.getItem('cartItems');
        let cartCount = 0;
        let totalPrice = 0;
        if (cartItems) {
            cartItems = JSON.parse(cartItems);
            for (let productId in cartItems) {
                cartCount += cartItems[productId];
                totalPrice += cartItems[productId] * productPrices[productId];
            }
        }
        document.getElementById('cartCount').innerHTML = "<p>Số lượng trong giỏ hàng: " + cartCount + "</p>";
        document.getElementById('totalPrice').textContent = "$" + totalPrice;

        // Update cart items list
        let cartItemList = document.getElementById('cartItemList');
        cartItemList.innerHTML = '';
        for (let productId in cartItems) {
            let listItem = document.createElement('li');
            listItem.textContent = "Sản phẩm " + productId + ": " + cartItems[productId] + " sản phẩm - Tổng giá: $" + (cartItems[productId] * productPrices[productId]);
            
            // Add delete button for each item
            let deleteButton = document.createElement('button');
            deleteButton.textContent = "Xóa";
            deleteButton.onclick = function() {
                deleteItem(productId);
            };
            listItem.appendChild(deleteButton);
            
            cartItemList.appendChild(listItem);
        }
    }

    function clearCart() {
        localStorage.removeItem('cartItems');
        updateCartCount();
    }

    function deleteItem(productId) {
        let cartItems = localStorage.getItem('cartItems');
        if (cartItems) {
            cartItems = JSON.parse(cartItems);
            if (cartItems[productId] > 1) {
                cartItems[productId]--;
            } else {
                delete cartItems[productId];
            }
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            updateCartCount();
        }
    }

    function checkout() {
        alert("Cảm ơn bạn đã thanh toán! Đơn hàng của bạn đang được xử lý.");
        localStorage.removeItem('cartItems');
        updateCartCount();
    }

    // Update cart count when page loads
    window.onload = function() {
        updateCartCount();
    };

    // Update cart count if any changes occur in the local storage
    window.addEventListener('storage', function(event) {
        if (event.key === 'cartItems') {
            updateCartCount();
        }
    });

    </script>
</body>
</html>
